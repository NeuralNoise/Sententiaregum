## Configuration parameters

classes:
  - sententiaregum::ssh
  - sententiaregum::installs
  - sententiaregum::backend::php
  - sententiaregum::backend::server
  - sententiaregum::infrastructure::mailcatcher
  - sententiaregum::infrastructure::mysql
  - sententiaregum::infrastructure::redis
  - sententiaregum::infrastructure::jobs
  - sententiaregum::frontend::node
  - sententiaregum::frontend::npm

# basic apt packages for the machine
sententiaregum::installs::packages:
  - vim
  - git
  - bash-completion
  - ruby-dev
  - software-properties-common
  - python-software-properties
  - libsqlite3-dev
  - curl

# ssh entry point
sententiaregum::ssh::entry_point: /var/www/sententiaregum

# php/composer configurations
sententiaregum::backend::php::version: '5.6'
sententiaregum::backend::php::extensions:
  gd:     {}
  cli:    {}
  mysql:  {}
  curl:   {}
  intl:   {}
  mcrypt: {}
  xdebug: {}
  apc:
    module_prefix: 'php-'

sententiaregum::backend::php::composer: true
sententiaregum::backend::php::timezone: UTC

# server configurations
sententiaregum::backend::server::host_name: sententiaregum.dev
sententiaregum::backend::server::doc_root: /var/www/sententiaregum/web
sententiaregum::backend::server::front_controller: app_dev.php
sententiaregum::backend::server::port: 80
sententiaregum::backend::server::modules:
  rewrite: {}

sententiaregum::backend::server::server_aliases: '192.168.66.211'

# mysql configurations
sententiaregum::infrastructure::mysql::databases:
  sententiaregum:
    user: dev
    password: dev
    host: localhost
    grant: ['ALL']
  behat:
    user: dev
    password: dev
    host: localhost
    grant: ['ALL']

# redis configurations
sententiaregum::infrastructure::redis::instances:
  doctrine-cache:
    redis_port: 6900
  social-post-queue:
    redis_port: 6901
  dashboard-cache:
    redis_port: 6902
  pending-activations:
    redis_port: 6903
  online-users:
    redis_port: 6904

# cronjob configurations
sententiaregum::infrastructure::jobs::schedules:
  cleanup_sessions:
    command: "php /var/www/sententiaregum/app/console ma27:auth:session-cleanup"
    user: vagrant
    hour: 5
  cleanup_registrations:
    command: "php /var/www/sententiaregum/app/console sententiaregum:purge:pending-activations"
    user: vagrant
    hour: 5

# nodejs
sententiaregum::frontend::node::version: 'stable'
sententiaregum::frontend::node::make_install: false

# global npm packages
sententiaregum::frontend::npm::packages:
  - mocha
  - webpack
  - webpack-core
  - node-gyp
  - eslint
  - eslint-plugin-react
  - less
